--- 
layout: single
classes: wide
title: "[Spring4 입문] 웹 애플리케이션 아키텍쳐"
header:
  overlay_image: /img/spring-bg.jpg
subtitle: '웹 애플리케이션 아키텍쳐에 대해서 알아보자'
author: "window_for_sun"
header-style: text
categories :
  - Spring
tags:
    - Web
    - Spring
    - Spring4 입문
    - Architecture
    - Intro
---  

'웹 애플리케이션 아키텍쳐에 대해서 알아보자'

## 웹 애플리케이션 아키텍쳐 설계 목표
- 웹 애플리케이션 아키텍쳐 설계 목표는 크게 두 가지가 있다.
	1. 유스 케이스(Use Case)등으로 표현되는 기능 요구나 응답 시간 등을 규정한 비기능적 요구를 포함한 사용자의 요구를 만족해야 한다는 목표
	1. 비동기 요건이나 제약에 포함되는 개발 기간 엄수나 변경, 기능 추가의 용의성, 테스트의 용이성 등 개발자나 운영자를 위한 목표
		- 개발 효율
			- 의도를 파악하기 쉽고 이해하기 쉬운 구조
			- 테스트하기 쉬운 구조
		- 유연성
			- 변경하기 쉽고 기능을 추가하기 쉬운 구조
			- 미래의 환경 변화에 대응할 수 있는 견고한 구조

## 티어와 레이어
- 웹 애플리케이션의 아키텍쳐는 크게 **티어**라고 하는 물리층과 **레이어**라고 하는 논리층으로 나뉜다.
- 티어
	- ![티어 그림]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-tier-1.png)
	- 클라이언트 층, 중간 층, EIS(Enterprise Information System) 층의 3개의 층이 기본이다.
- 레이어
	- 레이어는 아키텍쳐 패턴 중 하나이며, 서로 인접한 레이어끼리만 단방향 액세스를 할수 있다.
	- 아래 3개 층으로 나누고 각각 다른 역할을 부여한다.
		- 프리젠테이션 층 
			- 사용자 인터페이스(UI)와 컨트롤러를 제공한다
			- 클래스 이름에 Controller나 Action이 붙은 클래스가 배치된다.
		- 비지니스 로직 층
			- 비지니스 로직을 제공한다. 
			- 크래스 이름 끝에 Service가 붙은 유스 케이스를 제어하는 클래스나 회사(Company), 종업원(Employee), 주문(Order) 등 업무 대상의 이름이 붙은 클래스가 배치된다.
		- 데이터 액세스 층
			- 데이터베이스 액세스를 추상화 한다.
			- 클래스 이름 끝에 Dao(Data Access Object)가 붙은 클래스가 배치된다.
	-   | 이름 | 상세이름 | 정의 |
		|---|---|---|
		| 컨트롤러 | | 화면 전환이나 화면에서 버튼을 눌렀을 때의 동작 제어 또는 세션 관리 등을 함 |
		| 비지니스 로직 | 서비스(애플리케이션) | 유스 케이스로 표현되는 특정 업무나 특정 부서 처리등 통합. 트랜잭션의 기점, 일반적으로는 stateless(자신의 상태값을 가지지 않음) 클래스 |
		| | 도메인 | 서비스로 부터 비지니스를 실행하는 데 반드시 사용하는 고객과 주문 같은 클래스의 집합. 자신이 무엇인지 나타내는 값과 그 값을 이용한 처리를 실현함 |
	-   | 레이어1 | 레이어2 | 레이어3 | 레이어4 |
		|---|---|---|---|
		| 프리젠테이션 | 프리젠테이션 | 프리젠테이션 | 클라이언트 층에 있는 프리젠테이션 |
		| | | 애플리케이션 컨트롤러 | 중간층 프리젠테이션 |
		| 비지니스 | 서비스 | 도메인 | 비지니스 |
		| | 도메인 | | |
		| 데이터 액세스 | 퍼시스턴스 | 인티그레이션 | 인티그레이션 |
		| | | | 리소스 |
	- ![레이어가 아닌 예]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-layer-1.png)
	- 위 그림에서 제시된 레이러라고 부르는 것은 인접한 레이어에 대한 단방향 액세스 뿐만아니라, 상호 의존을 하고 있다.
	- 이는 레이어라고 할 수 없고, 리펙토링이 필요하다.
- 오목형 레이어
	- 웹 애플리케이션의 레이어는 크게 비지니스와 관련된 부분과 비지니스 로직의 결과를 어떻게 표현할지 구현하는 두 부분으로 나눌 수 있다.
	- ![지향해야 하는 레이어 구조]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-layer-2.png)
	- 위 그림은 비지니스 로직의 결과를 어떻게 다룰지 구현하는 기술이 비지니스 로직에 영향을 미치지 않기 때문에 좋은 설계이다.
	- 이러한 설계를 바탕으로 만들어진 레이어가 **오목형 레이어**이다.
	- ![오목형 레이어]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-layer-3.png)
	- 위 그림과 같은 오목형 레이어는 안정 의존 원칙(Stable Dependencies Principle)과 의존 관계 역전 원칙(Dependency Inversion Principle) 등에 뒷받침된 구조이다.
	- 프리젠테이션 층에 변경(데스크톱 브라우저 -> 모바일 브라우저) 있을 경우와 데이터 액세스 층이 변경(RDB -> NoSQL)되었을 경우 등에서도 비지니스 층에 영향을 미치지 않는다.
	- 비지니스 층은 시스템의 핵심, 기반이므로 다른 층이 바뀌기 되더라도 영향을 받지 않아야 한다.
	- 비지니스 층을 다른 층들과 분리하기위해서는 레이어를 형식으로만 분류하지 않고 레이어의 결합 부분에 인터페이스를 도입한 약한 결합 설계나 구현을 해야 한다.

## 프리젠테이션 층의 역할
- 프리젠테이션 층의 주된 역할은 사용자 인터페이스와 컨트롤러를 제공하는 것이다.
- MVC2
	- ![MVC2]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-mvc2-1.png)

## 비지니스 로직 층의 역할
- 비지니스 로직층은 서비스나 도메인 같은 비지니스 로직을 구현하는 웹 애플리케이션의 중심이다.

**... 추가 필요함 ....**  

## 파티션 혹은 인프라층
- 스프링을 레이어에 맞추려고 하면 상당이 어려운 요소들이 있다.
- 프리젠테이션 층은 스프링MVC고, 데이터 액세스 층은 스프링JDBC로 할 수도 있디만, 코어인 DIxAOP와 스프링 시큐리티 같은 것은 여러 레이어에 걸쳐 있다.
- 스프릉은 레이어에서 독립되어 있고, 레이어는 개발자가 작성하는 것으로 생각하도록 해본다.
- ![파티션 혹은 인프라]({{site.baseurl}}/img/spring/spring-spring4intro-1-webarchitecture-partitionorinfra-1.png)

---
## Reference
[스프링4 입문](https://book.naver.com/bookdb/book_detail.nhn?bid=12685135)  